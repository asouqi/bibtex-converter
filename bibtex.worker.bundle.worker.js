(()=>{"use strict";var t={},e={};function r(a){var n=e[a];if(void 0!==n)return n.exports;var o=e[a]={exports:{}};return t[a].call(o.exports,o,o.exports,r),o.exports}r.m=t,r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},r.f={},r.e=t=>Promise.all(Object.keys(r.f).reduce((e,a)=>(r.f[a](t,e),e),[])),r.u=t=>"citation-js.bundle.worker.js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var a=e.getElementsByTagName("script");if(a.length)for(var n=a.length-1;n>-1&&(!t||!/^http(s?):/.test(t));)t=a[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),(()=>{var t={331:1};r.f.i=(e,a)=>{t[e]||importScripts(r.p+r.u(e))};var e=self.webpackChunkbibtex_converter=self.webpackChunkbibtex_converter||[],a=e.push.bind(e);e.push=e=>{var n=e[0],o=e[1],c=e[2];for(var s in o)r.o(o,s)&&(r.m[s]=o[s]);for(c&&c(r);n.length;)t[n.pop()]=1;a(e)}})();const a=t=>{let e="";return t.map(t=>{const{id:r,title:a,author:o,issued:c}=t;e+="\\bibitem{".concat(r,"}");const s=(t=>t.map(t=>{const{family:e,given:r}=t;return e&&r?"".concat(n(e),", ").concat(r.charAt(0).toUpperCase(),"."):r?n(r):e&&n(e)||""}))(o);1===s.length?e+="".concat(s[0]," ").concat(a,". "):e+=s.slice(0,-1).join(", ")+" \\& "+s.slice(-1)[0]+" ".concat(a,". ");const i=t["container-title"];if(i){const{volume:r,page:a,issue:o}=t;e+="{\\em ".concat(i.split(" ").map(t=>n(t)).join(" "),"}."),r&&(e+=" \\textbf{".concat(r,"}")),a&&(e+=o?", ".concat(a):" pp. ".concat(a)),c&&c["date-parts"]&&c["date-parts"].length>0&&(e+=" (".concat(c["date-parts"].toString(),")"))}const p=t.publisher;!i&&p&&(e+=c&&c["date-parts"]&&"(".concat(p,",").concat(c["date-parts"].toString(),")")||"(".concat(p,")")),c&&c["date-parts"]&&c["date-parts"].length>0&&!p&&!i&&(e+=" (".concat(c["date-parts"].toString(),")"));const l=t.URL;l&&l!==p&&(e+=", ".concat(l));const u=t.note;u&&(e+=", ".concat(u)),e+="\n"}),e},n=t=>t.charAt(0).toUpperCase()+t.slice(1);onmessage=t=>{const{input:e,format:n,style:o,csl:c}=t.data;(async function(t,e,n,o){await r.e(992).then(r.bind(r,434)),await r.e(992).then(r.bind(r,610)),await r.e(992).then(r.bind(r,290));const{Cite:c,plugins:s}=await r.e(992).then(r.bind(r,206));"apa"!==n&&"harvard"!==n&&s.config.get("@csl").templates.add(n,o);const i=c(t,{format:"string"});switch(e){case"BIB":{const t=JSON.parse(i.format("data"));return a(t)}case"XML":return JSON.parse(i.format("data"));case"PDF":case"TXT":case"CIT":case"RIS":case"HTML":case"WORD":return i.format(("RIS"===e?"ris":"CIT"===e&&"citation")||"bibliography",{format:"TXT"===e?"text":"html",hyperlinks:!0,template:n,lang:"en-US"})}})(e,n,o,c).then(t=>{postMessage({output:t})}).catch(()=>{postMessage({error:!0})})}})();